# 计算器项目设计文档

## 系统架构

### 整体架构
采用React单页应用架构，所有计算逻辑在客户端执行，无需后端服务。

```
┌─────────────────────────────────────────┐
│              Calculator App               │
├─────────────────────────────────────────┤
│  ┌─────────────┐ ┌─────────────────────┐ │
│  │   Header    │ │    Author Info      │ │
│  │  (标题栏)   │ │  (作者信息显示)    │ │
│  └─────────────┘ └─────────────────────┘ │
│  ┌─────────────────────────────────────┐ │
│  │        Mode Selector               │ │
│  │      (功能模式选择器)               │ │
│  └─────────────────────────────────────┘ │
│  ┌─────────────────────────────────────┐ │
│  │         Display Area               │ │
│  │        (结果显示区域)               │ │
│  └─────────────────────────────────────┘ │
│  ┌─────────────────────────────────────┐ │
│  │        Input Controls              │ │
│  │       (输入控制区域)                │ │
│  └─────────────────────────────────────┘ │
└─────────────────────────────────────────┘
```

### 功能模块设计

#### 1. 基础计算器模块
- **功能**：加减乘除四则运算
- **输入**：数字键盘 + 运算符
- **输出**：计算结果
- **特殊处理**：小数点、负数、清除功能

#### 2. 高级数学模块
- **平方运算**：x²
- **平方根运算**：√x
- **输入验证**：平方根输入必须≥0

#### 3. 三角形计算模块
- **输入参数**：
  - 两个已知角度（角度制）
  - 一条已知边长
  - 边对应的角选择（A、B、C）
- **计算输出**：
  - 第三个角度
  - 另外两条边长
- **数学原理**：正弦定理

#### 4. 经纬度计算模块
- **输入格式**：
  - 度（Decimal Degrees）
  - 度分秒（DMS）
- **计算功能**：
  - 两点间距离（米）
  - A→B航向角
  - B→A航向角
- **算法**：Haversine公式

#### 5. 速度换算模块
- **支持单位**：
  - km/h（千米每小时）
  - m/s（米每秒）
  - mph（英里每小时）
  - knots（节）
- **换算关系**：基于标准换算系数

### 组件架构

```
src/
├── components/
│   ├── Calculator/
│   │   ├── BasicCalculator.tsx      # 基础计算器
│   │   ├── AdvancedMath.tsx         # 高级数学
│   │   ├── TriangleCalculator.tsx   # 三角形计算
│   │   ├── CoordinateCalculator.tsx # 经纬度计算
│   │   └── SpeedConverter.tsx       # 速度换算
│   ├── common/
│   │   ├── Display.tsx              # 结果显示
│   │   ├── NumberPad.tsx            # 数字键盘
│   │   └── ModeSelector.tsx         # 模式选择
│   └── App.tsx                      # 主应用
├── utils/
│   ├── calculations.ts              # 计算函数
│   ├── conversions.ts               # 单位换算
│   └── validations.ts               # 输入验证
└── types/
    └── calculator.ts                # TypeScript类型定义
```

### 数据流设计

#### 状态管理
使用React useState管理组件状态：
- 当前模式（基础/高级/三角形/经纬度/速度）
- 输入值和计算结果
- 历史记录（可选）

#### 计算流程
1. 用户输入 → 输入验证
2. 有效输入 → 计算函数
3. 计算结果 → 结果显示
4. 错误处理 → 错误提示

### 界面设计

#### 布局原则
- **简约风格**：最小化视觉元素
- **紧凑布局**：适合半屏显示
- **清晰分区**：功能区域明确分隔
- **响应式设计**：适配不同屏幕尺寸

#### 色彩方案
- **主色调**：深灰色背景（#1f2937）
- **按钮色**：蓝色系（#3b82f6）
- **高亮色**：绿色（#10b981）
- **警告色**：红色（#ef4444）

#### 交互设计
- **即时反馈**：输入即时显示
- **错误提示**：友好的错误信息
- **模式切换**：平滑的界面转换
- **键盘支持**：数字键盘输入

### 性能优化
- **计算缓存**：避免重复计算
- **输入防抖**：减少不必要的渲染
- **组件懒加载**：按需加载功能模块

### 错误处理
- **输入验证**：防止无效输入
- **计算错误**：数学计算异常处理
- **边界条件**：处理极端情况
- **用户友好**：清晰的错误提示